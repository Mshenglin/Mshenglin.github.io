<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>多线程基础 | 马生林的博客</title><meta name="description" content="多线程基础"><meta name="keywords" content="-java -多线程"><meta name="author" content="马生林"><meta name="copyright" content="马生林"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="多线程基础"><meta name="twitter:description" content="多线程基础"><meta name="twitter:image" content="https://i.loli.net/2020/09/20/tkXLNWqwchHUACd.jpg"><meta property="og:type" content="article"><meta property="og:title" content="多线程基础"><meta property="og:url" content="http://www.mashenglin.top/2020/09/30/多线程基础/"><meta property="og:site_name" content="马生林的博客"><meta property="og:description" content="多线程基础"><meta property="og:image" content="https://i.loli.net/2020/09/20/tkXLNWqwchHUACd.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="/css/background.css"><link rel="canonical" href="http://www.mashenglin.top/2020/09/30/多线程基础/"><link rel="next" title="剑指offer--链表篇" href="http://www.mashenglin.top/2020/03/26/剑指offer-链表篇/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://mashenglin.xyz","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'true',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">马生林的博客</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#该章节学习java中Thread的核心方法"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">该章节学习java中Thread的核心方法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-线程和进程"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">1.线程和进程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-使用多线程"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">2.使用多线程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-java实现多线程的两种方式"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">2.1 java实现多线程的两种方式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#2-1-1继承Thread类"><span class="toc_mobile_items-number">1.2.1.1.</span> <span class="toc_mobile_items-text">2.1.1继承Thread类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#多线程执行的随机性"><span class="toc_mobile_items-number">1.2.1.1.1.</span> <span class="toc_mobile_items-text">多线程执行的随机性</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-2-实现Runnable接口"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">2.1.2  实现Runnable接口</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#Runnable的优点"><span class="toc_mobile_items-number">1.2.2.0.1.</span> <span class="toc_mobile_items-text">Runnable的优点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#实例变量共享造成的非线程安全问题和解决方案"><span class="toc_mobile_items-number">1.2.2.0.2.</span> <span class="toc_mobile_items-text">实例变量共享造成的非线程安全问题和解决方案</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-Thread类中的方法"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">3  Thread类中的方法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-1-currentThread-方法"><span class="toc_mobile_items-number">1.2.3.1.</span> <span class="toc_mobile_items-text">3.1 currentThread()方法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#run-和start-方法的区别"><span class="toc_mobile_items-number">1.2.3.1.1.</span> <span class="toc_mobile_items-text">run()和start()方法的区别</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-2-isAlive-方法"><span class="toc_mobile_items-number">1.2.3.2.</span> <span class="toc_mobile_items-text">3.2  isAlive()方法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-3-sleep-long-millis"><span class="toc_mobile_items-number">1.2.3.3.</span> <span class="toc_mobile_items-text">3.3 sleep(long millis)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-4-getId"><span class="toc_mobile_items-number">1.2.3.4.</span> <span class="toc_mobile_items-text">3.4 getId()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-5-停止线程的方法"><span class="toc_mobile_items-number">1.2.3.5.</span> <span class="toc_mobile_items-text">3.5 停止线程的方法</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#3-5-1使用interrupt-停止线程"><span class="toc_mobile_items-number">1.2.3.5.1.</span> <span class="toc_mobile_items-text">3.5.1使用interrupt()停止线程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#3-5-2使用stop-停止线程"><span class="toc_mobile_items-number">1.2.3.5.2.</span> <span class="toc_mobile_items-text">3.5.2使用stop()停止线程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#3-5-3使用interrupt-异常方法停止线程"><span class="toc_mobile_items-number">1.2.3.5.3.</span> <span class="toc_mobile_items-text">3.5.3使用interrupt()+异常方法停止线程</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-6-暂停线程"><span class="toc_mobile_items-number">1.2.3.6.</span> <span class="toc_mobile_items-text">3.6 暂停线程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#缺点"><span class="toc_mobile_items-number">1.2.3.6.1.</span> <span class="toc_mobile_items-text">缺点</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-7yield-方法"><span class="toc_mobile_items-number">1.2.3.7.</span> <span class="toc_mobile_items-text">3.7yield()方法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#3-8-线程的优先级"><span class="toc_mobile_items-number">1.2.3.8.</span> <span class="toc_mobile_items-text">3.8 线程的优先级</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#3-8-1-线程的优先级是可以继承的"><span class="toc_mobile_items-number">1.2.3.8.1.</span> <span class="toc_mobile_items-text">3.8.1 线程的优先级是可以继承的</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#3-8-2-线程的优先级是有随机性的"><span class="toc_mobile_items-number">1.2.3.8.2.</span> <span class="toc_mobile_items-text">3.8.2 线程的优先级是有随机性的</span></a></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#小结"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">小结</span></a></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#该章节学习java中Thread的核心方法"><span class="toc-number">1.</span> <span class="toc-text">该章节学习java中Thread的核心方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-线程和进程"><span class="toc-number">1.1.</span> <span class="toc-text">1.线程和进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-使用多线程"><span class="toc-number">1.2.</span> <span class="toc-text">2.使用多线程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-java实现多线程的两种方式"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 java实现多线程的两种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1继承Thread类"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.1继承Thread类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#多线程执行的随机性"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">多线程执行的随机性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-实现Runnable接口"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.1.2  实现Runnable接口</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Runnable的优点"><span class="toc-number">1.2.2.0.1.</span> <span class="toc-text">Runnable的优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#实例变量共享造成的非线程安全问题和解决方案"><span class="toc-number">1.2.2.0.2.</span> <span class="toc-text">实例变量共享造成的非线程安全问题和解决方案</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Thread类中的方法"><span class="toc-number">1.2.3.</span> <span class="toc-text">3  Thread类中的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-currentThread-方法"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">3.1 currentThread()方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#run-和start-方法的区别"><span class="toc-number">1.2.3.1.1.</span> <span class="toc-text">run()和start()方法的区别</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-isAlive-方法"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">3.2  isAlive()方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-sleep-long-millis"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3.3 sleep(long millis)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-getId"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">3.4 getId()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-停止线程的方法"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">3.5 停止线程的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-5-1使用interrupt-停止线程"><span class="toc-number">1.2.3.5.1.</span> <span class="toc-text">3.5.1使用interrupt()停止线程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-5-2使用stop-停止线程"><span class="toc-number">1.2.3.5.2.</span> <span class="toc-text">3.5.2使用stop()停止线程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-5-3使用interrupt-异常方法停止线程"><span class="toc-number">1.2.3.5.3.</span> <span class="toc-text">3.5.3使用interrupt()+异常方法停止线程</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-暂停线程"><span class="toc-number">1.2.3.6.</span> <span class="toc-text">3.6 暂停线程</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#缺点"><span class="toc-number">1.2.3.6.1.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-7yield-方法"><span class="toc-number">1.2.3.7.</span> <span class="toc-text">3.7yield()方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-8-线程的优先级"><span class="toc-number">1.2.3.8.</span> <span class="toc-text">3.8 线程的优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-8-1-线程的优先级是可以继承的"><span class="toc-number">1.2.3.8.1.</span> <span class="toc-text">3.8.1 线程的优先级是可以继承的</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-8-2-线程的优先级是有随机性的"><span class="toc-number">1.2.3.8.2.</span> <span class="toc-text">3.8.2 线程的优先级是有随机性的</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">1.3.</span> <span class="toc-text">小结</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.loli.net/2020/09/20/tkXLNWqwchHUACd.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">多线程基础</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-09-30<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-09-30</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/多线程与并发/">多线程与并发</a></span><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="该章节学习java中Thread的核心方法"><a href="#该章节学习java中Thread的核心方法" class="headerlink" title="该章节学习java中Thread的核心方法"></a>该章节学习java中Thread的核心方法</h2><h3 id="1-线程和进程"><a href="#1-线程和进程" class="headerlink" title="1.线程和进程"></a>1.线程和进程</h3><p><strong>进程：</strong>是并发执行的程序在执行过程中分配和管理资源的基本单位，是一个动态概念，竞争计算机系统资源的基本单位。</p>
<p><strong>线程：</strong>是进程的一个执行单元，是进程内科调度实体。比进程更小的独立运行的基本单位。线程也被称为轻量级进程。</p>
<p>一个程序至少一个进程，一个进程至少一个线程。</p>
<h3 id="2-使用多线程"><a href="#2-使用多线程" class="headerlink" title="2.使用多线程"></a>2.使用多线程</h3><h4 id="2-1-java实现多线程的两种方式"><a href="#2-1-java实现多线程的两种方式" class="headerlink" title="2.1 java实现多线程的两种方式"></a>2.1 java实现多线程的两种方式</h4><p>一种是继承Thread类，一种是实现Runnable接口。</p>
<p>Thread的类声明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class Thread implements Runnable</span><br></pre></td></tr></table></figure>
<p>Thread也是实现了Runable接口。</p>
<p>使用Thread创建新线程的局限性，是Java只支持单继承，所以为了支持多继承，实现Runnable接口。本质没有区别。</p>
<h5 id="2-1-1继承Thread类"><a href="#2-1-1继承Thread类" class="headerlink" title="2.1.1继承Thread类"></a>2.1.1继承Thread类</h5><p>让一个类继承Thread类并实现多线程。</p>
<p>MyThread类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xu.Thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span>  <span class="title">Thread</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.run();</span><br><span class="line">        System.out.println(<span class="string">"该线程运行了"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Run类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ackage com.xu.Thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Run</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyThread myThread=<span class="keyword">new</span> MyThread();</span><br><span class="line">        myThread.start();</span><br><span class="line">        System.out.println(<span class="string">"out"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="多线程执行的随机性"><a href="#多线程执行的随机性" class="headerlink" title="多线程执行的随机性"></a>多线程执行的随机性</h6><p>上面这个实例就是通过继承Thread实现多线程。通过start()方法启动多线程。start()方法通知”线程规划器”，该线程已经准备就绪，让系统安排调用run()方法，据有随机执行的效果。</p>
<p>多线程随机输出的原因：<strong>cpu将时间片分给不同的线程。线程获得时间片后执行任务，所以这些线程交替的执行。</strong>时间片既cpu分配给个线程的时间。</p>
<p>如果我们调用thread.run()就不是使用多线程执行的。而是由main方法调用。所以使用多线程执行run()方法使用thread.start()来启动一个线程。并且执行start()的顺序并不是执行run()的顺序。</p>
<p>在多线程中，代码的运行结果与代码的执行顺序是没有关系的。线程是子任务，CPU会以不确定的方式，调用线程的run()方法。</p>
<h4 id="2-1-2-实现Runnable接口"><a href="#2-1-2-实现Runnable接口" class="headerlink" title="2.1.2  实现Runnable接口"></a>2.1.2  实现Runnable接口</h4><p>如果要创建的一个线程类已经有一个父类，就不可以通过继承Thread类来实现多线程，因为java不支持多继承，所以我们要通过实现Runnable接口来实现多线程。</p>
<p>MyRunnable类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xu.Runable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"该线程执行中"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MyRun类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xu.Runable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Run</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Runnable myRunnable=<span class="keyword">new</span> MyRunnable();</span><br><span class="line">        Thread thread=<span class="keyword">new</span> Thread(myRunnable);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面就是通过Runable创建多线程的方式。</p>
<h6 id="Runnable的优点"><a href="#Runnable的优点" class="headerlink" title="Runnable的优点"></a>Runnable的优点</h6><p>通过Runnable可以间接的实现多”继承”。</p>
<h6 id="实例变量共享造成的非线程安全问题和解决方案"><a href="#实例变量共享造成的非线程安全问题和解决方案" class="headerlink" title="实例变量共享造成的非线程安全问题和解决方案"></a>实例变量共享造成的非线程安全问题和解决方案</h6><p>当多个线程同时去操作一个实例变量，就会造成线程不安全问题。</p>
<p>典型的实例，就是买票系统，当多个线程对总票数操作的时候，就会造成多个线程对其同时操作，共享的票数变量重复。</p>
<p><strong>解决方案：</strong>通过给run()方法加synchronized关键字。当多个线程同时要执行run()方法，synchronized会锁住当前线程，其他的线程以排队的方式等待，等当前执行的线程释放该锁，让其他线程继续执行。</p>
<h4 id="3-Thread类中的方法"><a href="#3-Thread类中的方法" class="headerlink" title="3  Thread类中的方法"></a>3  Thread类中的方法</h4><p><img alt data-src="https://ftp.bmp.ovh/imgs/2020/09/9b9210b279b6eb3d.jpg" class="lazyload"></p>
<h5 id="3-1-currentThread-方法"><a href="#3-1-currentThread-方法" class="headerlink" title="3.1 currentThread()方法"></a>3.1 currentThread()方法</h5><p>currentThread()该方法返回代码段正在被按一个线程执行。  </p>
<h6 id="run-和start-方法的区别"><a href="#run-和start-方法的区别" class="headerlink" title="run()和start()方法的区别"></a>run()和start()方法的区别</h6><ol>
<li>run(),立即执行run()方法，不创建新的线程。</li>
<li>start(),执行run的时机不确定，启动一个新线程。</li>
</ol>
<h5 id="3-2-isAlive-方法"><a href="#3-2-isAlive-方法" class="headerlink" title="3.2  isAlive()方法"></a>3.2  isAlive()方法</h5><p>该方法时用来判断线程是否处于存活状态。存活状态：线程以启动尚未终止的状态。如果线程正在运行或者准备运行，那么该线程就处于存活状态。</p>
<h5 id="3-3-sleep-long-millis"><a href="#3-3-sleep-long-millis" class="headerlink" title="3.3 sleep(long millis)"></a>3.3 sleep(long millis)</h5><p>sleep()作用是在指定的时间内，让当前“正在执行的线程休眠”，这个当前正在执行的代码时this.currentThread()返回的线程。</p>
<h5 id="3-4-getId"><a href="#3-4-getId" class="headerlink" title="3.4 getId()"></a>3.4 getId()</h5><p>用来返回线程的唯一ID。</p>
<h5 id="3-5-停止线程的方法"><a href="#3-5-停止线程的方法" class="headerlink" title="3.5 停止线程的方法"></a>3.5 停止线程的方法</h5><p>停止一个线程意味着在这个线程在处理完任务之前，停止当前的工作。</p>
<p>停止线程的三种方法：</p>
<ol>
<li>使用退出标志让线程正常的退出。</li>
<li>使用stop()方法强制退出，但是不推荐使用，因为stop() 、suspend()、resume(),都是过期作废的方法。</li>
<li>使用interrupt()方法中断线程。</li>
</ol>
<h6 id="3-5-1使用interrupt-停止线程"><a href="#3-5-1使用interrupt-停止线程" class="headerlink" title="3.5.1使用interrupt()停止线程"></a>3.5.1使用interrupt()停止线程</h6><p>使用interrupt()方法中断线程，并不可以像break一样，直接退出，interrupt()方法只会做一个退出的标值，并不会真正退出。</p>
<p>判断当前线程中断的两种方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static boolean  interrupted()//判断当前执行代码的线程是否中断</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public boolean this,isInterrupted()//判断this关键字所在类的对象是否中断</span><br></pre></td></tr></table></figure>
<p>两种方法的区别</p>
<ul>
<li>this.interruped方法检测当前线程是否中断，执行后具有清除状态值的功能。</li>
<li>this,isInterrupted方法测试thread对象是否中断，不清除状态值。</li>
</ul>
<h6 id="3-5-2使用stop-停止线程"><a href="#3-5-2使用stop-停止线程" class="headerlink" title="3.5.2使用stop()停止线程"></a>3.5.2使用stop()停止线程</h6><p>使用stop()方法对线程停止，由于停止的时机是不确定的，这样会造成数据的不一致性。</p>
<h6 id="3-5-3使用interrupt-异常方法停止线程"><a href="#3-5-3使用interrupt-异常方法停止线程" class="headerlink" title="3.5.3使用interrupt()+异常方法停止线程"></a>3.5.3使用interrupt()+异常方法停止线程</h6><p>使用interrupt和异常的方式，停止线程。</p>
<h5 id="3-6-暂停线程"><a href="#3-6-暂停线程" class="headerlink" title="3.6 暂停线程"></a>3.6 暂停线程</h5><p>暂停的线程意味着还可以恢复运行，使用supend()方法来暂停线程，用resume()来恢复线程。 但是已经被废弃。要想对线程进行暂停与恢复处理，可以使用wait()、notify()和notifyAll().</p>
<h6 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h6><ol>
<li>会造成公共同步对象被独占。</li>
<li>数据不完整。</li>
</ol>
<h5 id="3-7yield-方法"><a href="#3-7yield-方法" class="headerlink" title="3.7yield()方法"></a>3.7yield()方法</h5><p>yield()用于放弃CPU资源，让其他资源去占用CPU资源，释放的时机是不确定的，有可能刚刚放弃，又获得cpu资源。</p>
<h5 id="3-8-线程的优先级"><a href="#3-8-线程的优先级" class="headerlink" title="3.8 线程的优先级"></a>3.8 线程的优先级</h5><p>java通过setsetPriority()方法来设置优先级，优先级是1-10级，如果小于1或者大于10就会抛出IllegalArgumentException异常。</p>
<p>下面这三个常量用来设置线程的优先级。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The minimum priority that a thread can have.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MIN_PRIORITY = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The default priority that is assigned to a thread.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NORM_PRIORITY = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The maximum priority that a thread can have.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MAX_PRIORITY = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>setPriority()源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setPriority</span><span class="params">(<span class="keyword">int</span> newPriority)</span> </span>&#123;</span><br><span class="line">       ThreadGroup g;</span><br><span class="line">       checkAccess();</span><br><span class="line">       <span class="keyword">if</span> (newPriority &gt; MAX_PRIORITY || newPriority &lt; MIN_PRIORITY) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>((g = getThreadGroup()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (newPriority &gt; g.getMaxPriority()) &#123;</span><br><span class="line">               newPriority = g.getMaxPriority();</span><br><span class="line">           &#125;</span><br><span class="line">           setPriority0(priority = newPriority);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h6 id="3-8-1-线程的优先级是可以继承的"><a href="#3-8-1-线程的优先级是可以继承的" class="headerlink" title="3.8.1 线程的优先级是可以继承的"></a>3.8.1 线程的优先级是可以继承的</h6><p>现成的优先级具有继承性。例如，A线程启动了B线程，所以B线程的优先级和A线程是相同的。</p>
<h6 id="3-8-2-线程的优先级是有随机性的"><a href="#3-8-2-线程的优先级是有随机性的" class="headerlink" title="3.8.2 线程的优先级是有随机性的"></a>3.8.2 线程的优先级是有随机性的</h6><p>在一般情况下，高优先级的线程会在低优先级的线程执行完毕之前执行完，但是不是一定的，它具有不确定性。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>该章主要讲了实现多线程的两种方式，继承Tread和实现Runnable接口。以及Thread类中常用的API。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">马生林</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.mashenglin.top/2020/09/30/多线程基础/">http://www.mashenglin.top/2020/09/30/多线程基础/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.mashenglin.top">马生林的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java-多线程/">-java -多线程    </a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/09/20/tkXLNWqwchHUACd.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/03/26/剑指offer-链表篇/"><img class="next_cover lazyload" data-src="https://i.loli.net/2020/09/20/R4DfP5T3XyrULnB.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>剑指offer--链表篇</span></div></a></div></nav></div></div><footer id="footer" style="background-image: url(https://i.loli.net/2020/09/20/tkXLNWqwchHUACd.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By 马生林</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><script src="/js/third-party/click_heart.js"></script></body></html>